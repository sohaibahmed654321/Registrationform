{% extends "base.html" %}
{% load static %}

{% block title %}Welcome{% endblock %}

{% block content %}

<!-- Splash Screen -->
<div id="splash-screen"
     class="d-flex justify-content-center align-items-center position-fixed top-0 start-0 w-100 h-100 bg-black"
     style="z-index: 9999;">
    <h1 class="splash-logo text-white mb-0">ðŸš€</h1>
</div>

<!-- Main Content -->
<div id="main-content" class="container py-5" style="display: none;">

    <!-- Welcome Section -->
    <h1 class="fw-bold mb-3 text-center">Welcome to My App</h1>
    <p class="text-muted mb-4 text-center">
        A Django + Firebase powered application.<br>
        Register, Login, and manage your profile seamlessly.
    </p>
    <div class="d-flex justify-content-center gap-3 mb-5">
        <a href="{% url 'signup' %}" class="btn btn-primary px-4 rounded-pill">Signup</a>

    </div>

    <!-- User Data Table -->
    <div class="card shadow-lg p-4">
        <h3 class="fw-bold mb-3">ðŸ“‹ User Data</h3>
        <table class="table table-dark table-hover text-center align-middle mt-3">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Gender</th>
                    <th>Address</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.name }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.phone }}</td>
                    <td>{{ user.gender }}</td>
                    <td>{{ user.address }}</td>
                    <td>
                        <!-- Edit & Delete Buttons -->
                        <a href="{% url 'edit_user' user.id %}" class="btn btn-warning btn-sm">Edit</a>
                        <a href="{% url 'delete_user' user.id %}" class="btn btn-danger btn-sm"
                           onclick="return confirm('Are you sure you want to delete this user?');">
                           Delete
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center text-muted">No data found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- CSS -->
<style>
  .splash-logo {
    font-size: 80px;
    animation: bounce 1.5s infinite;
  }
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }
  #splash-screen.fade-out {
    opacity: 0;
    transition: opacity 0.8s ease;
  }
</style>

{% endblock %}

{% block scripts %}
<script>
document.addEventListener("DOMContentLoaded", function() {
    const splash = document.getElementById("splash-screen");
    const main = document.getElementById("main-content");

    // Normal fade-out after 2s
    setTimeout(function() {
        splash.classList.add("fade-out");
        setTimeout(function() {
            splash.style.display = "none";
            main.style.display = "block";
        }, 800);
    }, 2000);

    // Fallback: force show after 3s (in case fade-out fails)
    setTimeout(() => {
        if (splash) splash.style.display = "none";
        if (main) main.style.display = "block";
    }, 3000);
});
</script>
{% endblock %}
